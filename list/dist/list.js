define("gallery/list/0.2.1/list",[],function(a,b){!function(a,c){"use strict";var d,e=a.document,f=function(a,b,f){var g,h,i,j,k,l,m=this,n={updated:[]};if(this.listContainer="string"==typeof a?e.getElementById(a):a,this.listContainer){this.items=[],this.visibleItems=[],this.matchingItems=[],this.searched=!1,this.filtered=!1,this.list=null,this.templateEngines={},this.page=b.page||200,this.i=b.i||1,h={start:function(a,b){b.plugins=b.plugins||{},this.classes(b),g=new k(m,b),this.callbacks(b),this.items.start(a,b),m.update(),this.plugins(b.plugins)},classes:function(a){a.listClass=a.listClass||"list",a.searchClass=a.searchClass||"search",a.sortClass=a.sortClass||"sort"},callbacks:function(a){m.list=d.getByClass(a.listClass,m.listContainer,!0),d.addEvent(d.getByClass(a.searchClass,m.listContainer),"keyup",m.search),l=d.getByClass(a.sortClass,m.listContainer),d.addEvent(l,"click",m.sort)},items:{start:function(a,b){if(b.valueNames){var d=this.get(),e=b.valueNames;b.indexAsync?this.indexAsync(d,e):this.index(d,e)}a!==c&&m.add(a)},get:function(){for(var a=m.list.childNodes,b=[],d=0,e=a.length;e>d;d++)a[d].data===c&&b.push(a[d]);return b},index:function(a,b){for(var c=0,d=a.length;d>c;c++)m.items.push(new j(b,a[c]))},indexAsync:function(a,b){var c=a.splice(0,100);this.index(c,b),a.length>0?setTimeout(function(){h.items.indexAsync(a,b)},10):m.update()}},plugins:function(a){for(var b={templater:g,init:h,initialItems:i,Item:j,Templater:k,sortButtons:l,events:n,reset:q},c=0;c<a.length;c++){a[c][1]=a[c][1]||{};var d=a[c][1].name||a[c][0];m[d]=m.plugins[a[c][0]].call(m,b,a[c][1])}}},this.add=function(a,b){b&&o(a,b);var d=[],e=!1;a[0]===c&&(a=[a]);for(var f=0,g=a.length;g>f;f++){var h=null;a[f]instanceof j?(h=a[f],h.reload()):(e=m.items.length>m.page?!0:!1,h=new j(a[f],c,e)),m.items.push(h),d.push(h)}return m.update(),d};var o=function(a,b,c){var d=a.splice(0,100);c=c||[],c=c.concat(m.add(d)),a.length>0?setTimeout(function(){o(a,b,c)},10):(m.update(),b(c))};this.show=function(a,b){this.i=a,this.page=b,m.update()},this.remove=function(a,b,c){for(var d=0,e=0,f=m.items.length;f>e;e++)m.items[e].values()[a]==b&&(g.remove(m.items[e],c),m.items.splice(e,1),f--,d++);return m.update(),d},this.get=function(a,b){for(var c=[],d=0,e=m.items.length;e>d;d++){var f=m.items[d];f.values()[a]==b&&c.push(f)}return 0==c.length?null:1==c.length?c[0]:c},this.sort=function(a,b){var e=(m.items.length,null),f=a.target||a.srcElement,g=!1,h="asc",i="desc",b=b||{};f===c?(e=a,g=b.asc||!1):(e=d.getAttribute(f,"data-sort"),g=d.hasClass(f,h)?!1:!0);for(var j=0,k=l.length;k>j;j++)d.removeClass(l[j],h),d.removeClass(l[j],i);g?(f!==c&&d.addClass(f,h),g=!0):(f!==c&&d.addClass(f,i),g=!1),b.sortFunction=b.sortFunction?b.sortFunction:function(a,b){return d.sorter.alphanum(a.values()[e],b.values()[e],g)},m.items.sort(b.sortFunction),m.update()},this.search=function(a,b){m.i=1;var d,e,f,h,i,j=[],b=b===c?m.items[0].values():b,a=a===c?"":a,k=a.target||a.srcElement;if(a=k===c?(""+a).toLowerCase():""+k.value.toLowerCase(),i=m.items,a=a.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),g.clear(),""===a)q.search(),m.searched=!1,m.update();else{m.searched=!0;for(var l=0,n=i.length;n>l;l++){d=!1,e=i[l],h=e.values();for(var o in b)h.hasOwnProperty(o)&&null!==b[o]&&(f=null!=h[o]?h[o].toString().toLowerCase():"",""!==a&&f.search(a)>-1&&(d=!0));d?(e.found=!0,j.push(e)):e.found=!1}m.update()}return m.visibleItems},this.filter=function(a){if(m.i=1,q.filter(),a===c)m.filtered=!1;else{m.filtered=!0;for(var b=m.items,d=0,e=b.length;e>d;d++){var f=b[d];f.filtered=a(f)?!0:!1}}return m.update(),m.visibleItems},this.size=function(){return m.items.length},this.clear=function(){g.clear(),m.items=[]},this.on=function(a,b){n[a].push(b)};var p=function(a){for(var b=n[a].length;b--;)n[a][b]()},q={filter:function(){for(var a=m.items,b=a.length;b--;)a[b].filtered=!1},search:function(){for(var a=m.items,b=a.length;b--;)a[b].found=!1}};this.update=function(){var a=m.items,b=a.length;m.visibleItems=[],m.matchingItems=[],g.clear();for(var c=0;b>c;c++)a[c].matching()&&c+1>=m.i&&m.visibleItems.length<m.page?(a[c].show(),m.visibleItems.push(a[c]),m.matchingItems.push(a[c])):a[c].matching()?(m.matchingItems.push(a[c]),a[c].hide()):a[c].hide();p("updated")},j=function(a,b,d){var e=this,f={};this.found=!1,this.filtered=!1;var h=function(a,b,d){if(b===c)d?e.values(a,d):e.values(a);else{e.elm=b;var f=g.get(e,a);e.values(f)}};this.values=function(a,b){if(a===c)return f;for(var d in a)f[d]=a[d];b!==!0&&g.set(e,e.values())},this.show=function(){g.show(e)},this.hide=function(){g.hide(e)},this.matching=function(){return m.filtered&&m.searched&&e.found&&e.filtered||m.filtered&&!m.searched&&e.filtered||!m.filtered&&m.searched&&e.found||!m.filtered&&!m.searched},this.visible=function(){return e.elm.parentNode?!0:!1},h(a,b,d)},k=function(a,b){return b.engine=b.engine===c?"standard":b.engine.toLowerCase(),new m.constructor.prototype.templateEngines[b.engine](a,b)},h.start(f,b)}};f.prototype.templateEngines={},f.prototype.plugins={},f.prototype.templateEngines.standard=function(a,b){function f(a){if(a===c){for(var d=g.childNodes,f=0,h=d.length;h>f;f++)if(d[f].data===c)return d[f];return null}if(-1!==a.indexOf("<")){var i=e.createElement("div");return i.innerHTML=a,i.firstChild}return e.getElementById(b.item)}var g=d.getByClass(b.listClass,a.listContainer,!0),h=f(b.item),i=this,j={created:function(a){a.elm===c&&i.create(a)}};this.get=function(a,b){j.created(a);for(var c={},e=0,f=b.length;f>e;e++){var g=d.getByClass(b[e],a.elm,!0);c[b[e]]=g?g.innerHTML:""}return c},this.set=function(a,b){j.created(a);for(var c in b)if(b.hasOwnProperty(c)){var e=d.getByClass(c,a.elm,!0);e&&(e.innerHTML=b[c])}},this.create=function(a){if(a.elm===c){var b=h.cloneNode(!0);b.id="",a.elm=b,i.set(a,a.values())}},this.remove=function(a){g.removeChild(a.elm)},this.show=function(a){j.created(a),g.appendChild(a.elm)},this.hide=function(a){a.elm!==c&&a.elm.parentNode===g&&g.removeChild(a.elm)},this.clear=function(){if(g.hasChildNodes())for(;g.childNodes.length>=1;)g.removeChild(g.firstChild)}},d={getByClass:function(){return e.getElementsByClassName?function(a,b,c){return c?b.getElementsByClassName(a)[0]:b.getElementsByClassName(a)}:function(a,b,c){var d=[],f="*";null==b&&(b=e);for(var g=b.getElementsByTagName(f),h=g.length,i=new RegExp("(^|\\s)"+a+"(\\s|$)"),j=0,k=0;h>j;j++)if(i.test(g[j].className)){if(c)return g[j];d[k]=g[j],k++}return d}}(),addEvent:function(a,b){return b.addEventListener?function(b,e,f){if((!b||b instanceof Array||b.length||d.isNodeList(b)||0===b.length)&&b!==a){if(b&&b[0]!==c)for(var g=b.length,h=0;g>h;h++)d.addEvent(b[h],e,f)}else b.addEventListener(e,f,!1)}:b.attachEvent?function(b,e,f){if((!b||b instanceof Array||b.length||d.isNodeList(b)||0===b.length)&&b!==a){if(b&&b[0]!==c)for(var g=b.length,h=0;g>h;h++)d.addEvent(b[h],e,f)}else b.attachEvent("on"+e,function(){return f.call(b,a.event)})}:void 0}(this,e),getAttribute:function(a,b){var d=a.getAttribute&&a.getAttribute(b)||null;if(!d)for(var e=a.attributes,f=e.length,g=0;f>g;g++)b[g]!==c&&b[g].nodeName===b&&(d=b[g].nodeValue);return d},isNodeList:function(a){var b=Object.prototype.toString.call(a);return"object"==typeof a&&/^\[object (HTMLCollection|NodeList|Object)\]$/.test(b)&&(0==a.length||"object"==typeof node&&a[0].nodeType>0)?!0:!1},hasClass:function(a,b){var c=this.getAttribute(a,"class")||this.getAttribute(a,"className")||"";return c.search(b)>-1},addClass:function(a,b){if(!this.hasClass(a,b)){var c=this.getAttribute(a,"class")||this.getAttribute(a,"className")||"";c=c+" "+b+" ",c=c.replace(/\s{2,}/g," "),a.setAttribute("class",c)}},removeClass:function(a,b){if(this.hasClass(a,b)){var c=this.getAttribute(a,"class")||this.getAttribute(a,"className")||"";c=c.replace(b,""),a.setAttribute("class",c)}},sorter:{alphanum:function(a,b,d){(a===c||null===a)&&(a=""),(b===c||null===b)&&(b=""),a=a.toString().replace(/&(lt|gt);/g,function(a,b){return"lt"==b?"<":">"}),a=a.replace(/<\/?[^>]+(>|$)/g,""),b=b.toString().replace(/&(lt|gt);/g,function(a,b){return"lt"==b?"<":">"}),b=b.replace(/<\/?[^>]+(>|$)/g,"");for(var e=this.chunkify(a),f=this.chunkify(b),g=0;e[g]&&f[g];g++)if(e[g]!==f[g]){var h=Number(e[g]),i=Number(f[g]);return d?h==e[g]&&i==f[g]?h-i:e[g]>f[g]?1:-1:h==e[g]&&i==f[g]?i-h:e[g]>f[g]?-1:1}return e.length-f.length},chunkify:function(a){for(var b,c,d=[],e=0,f=-1,g=0;b=(c=a.charAt(e++)).charCodeAt(0);){var h=45==b||46==b||b>=48&&57>=b;h!==g&&(d[++f]="",g=h),d[f]+=c}return d}}},b.List=f,b.ListJsHelpers=d}(window)});
